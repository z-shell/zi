---
name: Verify PR Labels

on:
  workflow_dispatch:
  pull_request_target:
    branches: [ 'main' ]
    types: [ 'opened', 'labeled', 'unlabeled', 'synchronize' ]

jobs:
  pr_labels:
    name: ğŸ­ Verify PR Labels
    runs-on: ubuntu-latest
    steps:
      - name: Update and get pip cache dir
        id: pip-cache
        run: |
          python -m pip install --upgrade pip
          echo "::set-output name=dir::$(pip cache dir)"

      - name: Restore pip cache
        uses: actions/cache@v2
        with:
          path: ${{ steps.pip-cache.outputs.dir }}
          key: ${{ runner.os }}-pip-${{ hashFiles('**/requirements.txt') }}
          restore-keys: |
            ${{ runner.os }}-pip-
            
      - name: ğŸ· Verify PR has a valid label
        uses: jesusvasquez333/verify-pr-label-action@v1.4.0
        with:
          github-token: "${{ secrets.GITHUB_TOKEN }}"
          valid-labels: "breaking-change ğŸ’¥, bug ğŸ, documentation ğŸ“, enhancement âœ¨, beginner-friendly âœ…, refactor â™»ï¸, performance ğŸš€, new-feature ğŸ‰, maintenance ğŸ“ˆ, ci ğŸ¤–, in-progress âš¡"
          disable-reviews: true
